---
import Layout from '@levino/shipyard-base/layouts/Splash.astro'

// Random animal that changes on each request - this proves SSR is working!
const animals = [
  {
    emoji: 'ğŸ¦Š',
    name: 'Fuchs',
    fact: 'FÃ¼chse kÃ¶nnen Ã¼ber 40 verschiedene Laute machen.',
  },
  {
    emoji: 'ğŸ¦‰',
    name: 'Eule',
    fact: 'Eulen kÃ¶nnen ihren Kopf bis zu 270 Grad drehen.',
  },
  {
    emoji: 'ğŸ¦‹',
    name: 'Schmetterling',
    fact: 'Schmetterlinge schmecken mit ihren FÃ¼ÃŸen.',
  },
  {
    emoji: 'ğŸ™',
    name: 'Oktopus',
    fact: 'Oktopusse haben drei Herzen und blaues Blut.',
  },
  {
    emoji: 'ğŸ¦¥',
    name: 'Faultier',
    fact: 'Faultiere brauchen 2 Wochen um ihr Essen zu verdauen.',
  },
  { emoji: 'ğŸ¦”', name: 'Igel', fact: 'Igel haben etwa 5000-7000 Stacheln.' },
  {
    emoji: 'ğŸ',
    name: 'Biene',
    fact: 'Eine Biene besucht etwa 50-100 BlÃ¼ten pro Sammelflug.',
  },
  {
    emoji: 'ğŸ¦©',
    name: 'Flamingo',
    fact: 'Flamingos sind rosa wegen der Krebse die sie essen.',
  },
  {
    emoji: 'ğŸ¨',
    name: 'Koala',
    fact: 'Koalas schlafen bis zu 22 Stunden am Tag.',
  },
  {
    emoji: 'ğŸ¦­',
    name: 'Robbe',
    fact: 'Robben kÃ¶nnen bis zu 2 Stunden die Luft anhalten.',
  },
]

const randomAnimal = animals[Math.floor(Math.random() * animals.length)]
const timestamp = new Date().toLocaleTimeString('de-DE')
---

<Layout title="SSR Demo - Dynamischer Content">
  <div class="prose max-w-none">
    <h1>shipyard SSR Demo</h1>

    <div class="alert alert-info my-8">
      <div class="text-6xl">{randomAnimal.emoji}</div>
      <div>
        <h3 class="font-bold m-0">ZufÃ¤lliges Tier: {randomAnimal.name}</h3>
        <p class="m-0">{randomAnimal.fact}</p>
        <p class="text-sm opacity-70 m-0">Generiert um {timestamp} - lade die Seite neu fÃ¼r ein neues Tier!</p>
      </div>
    </div>

    <p>
      Diese Seite demonstriert <strong>Server-Side Rendering (SSR)</strong> mit shipyard auf Cloudflare Pages.
      Jede Seite wird bei jedem Request neu gerendert - nicht statisch vorgebaut.
    </p>

    <h2>Was hier passiert</h2>
    <ul>
      <li><strong>Dynamischer Content</strong>: Das Tier oben Ã¤ndert sich bei jedem Seitenaufruf!</li>
      <li><strong>Server-Side Rendering</strong>: Alle Seiten werden on-demand gerendert</li>
      <li><strong>Cloudflare Pages</strong>: LÃ¤uft auf Cloudflare's Edge Network</li>
      <li><strong>Blog & Docs</strong>: Auch mit SSR statt statisch</li>
    </ul>

    <h2>Entdecke die Demo</h2>
    <ul>
      <li><a href="/blog">Blog</a> - Blogposts mit SSR</li>
      <li><a href="/docs">Dokumentation</a> - Docs mit SSR</li>
      <li><a href="/about">Ãœber diese Demo</a></li>
    </ul>

    <h2>Konfiguration</h2>
    <p>So aktivierst du SSR in deinem shipyard Projekt:</p>
    <pre><code>{`import cloudflare from '@astrojs/cloudflare'
import shipyardDocs from '@levino/shipyard-docs'
import shipyardBlog from '@levino/shipyard-blog'

export default defineConfig({
  output: 'server',
  adapter: cloudflare(),
  integrations: [
    shipyardDocs({ prerender: false }),
    shipyardBlog({ prerender: false }),
  ],
})`}</code></pre>
  </div>
</Layout>
